---

컴퓨터 하드웨어 바로 윗단에 설치되는 소프트웨어를 말한다.

### System이라는 키워드

- ‘시스템’ 이라는용어는 기반이나 틀이 되는 하드웨어를 지칭할 때 주로 사용되는데,
  소프트웨어인 운영체제에 사용된 것은 하드웨어가 운영체제와 한 몸이 되어야만
  사용자에게 쓰일 수 있는 진정한 컴퓨터 시스템이 되기 때문이다.
  ⇒ 전원을 켰을 때 운영체제가 없으면 그 컴퓨터는 고철 덩어리에 불과하다.

### 운영체제는 전원이 켜짐과 동시에 메모리에 올라간다.

- 소프트웨어가 컴퓨터 시스템에서 실행되기 위해, 메모리에 그 프로그램이 올라가 있어야 한다.
- 하지만 운영체제처럼 규모가 큰 프로그램이 모두 올라가면 메모리 공간 낭비가 심하다.
  그래서 항상 필요한 부분만 올라가고, 그렇지 않은 부분은 필요할 때 메모리로 올려서 사용한다.

### 메모리에 상주하는 운영체제의 부분을 커널이라 부른다.

- 이를 좁은 의미의 운영체제라고도 부른다.
- 운영체제 코드 중에서도 핵심적인 부분을 뜻한다.

# 운영체제의 기능

---

### 운영체제의 역할

- 사용자를 위한 역할
    - 내부 기능을 몰라도 해당 기능을 수행하도록 제공(추상화)
    - 사용자에게 편리한 인터페이스를 제공하는 역할을 한다.
- 하드웨어를 위한 역할
    - 컴퓨터 시스템 내의 자원(resource)을 효율적으로 관리 하는 것
      ⇒ 사용자가 직접 다루기 힘든 각종 하드웨어를 운영체제가 관리하는 역할을 한다.

### 핵심 기능 ⇒ 컴퓨터 시스템 내의 자원을 효율적으로 관리

- 그래서 운영체제를 자원관리자(resource manager)라고 부르기도 한다.
    - 자원이란 CPU, 메모리, 하드디스크 등 하드웨어 자원뿐 아니라 소프트웨어 자원까지를 통칭해서 부르는 말이다.
- 전체적인 성능을 향상시키려다보면 일부 프로그램 또는 사용자가 불이익을 당할 수 있다.
  ⇒ 따라서 운영체제는 사용자 및 프로그램들 간에 자원이 형평성 있게 분배 되도록 하는 균형자 역할도 함께 수행해야 한다(형평성).

### 운영체제의 메모리 보안

- 악의성 프로그램을 작성해 다른 사용자 프로그램이 올라가 있는 메모리 영역을 참조한다든지,
  또는 다른 사용자의 사적인 파일에 접근 하는 일이 일어나선 안된다.
- 악의성 프로그램이 운영체제 자체가 올라가 있는 메모리 영역을 변경하는 경우
  컴퓨터의 정상적인 작동에 치명적인 악영향을 줄 수 있다.

# 운영체제의 분류

---

동시 작업을 지원하는지의 여부에 따라 아래와 같이 나뉜다.

- 단일작업(Single tasking)용 운영체제
- 다중작업(Multi tasking)용 운영체제

초창기 도스(Disk Operating System:DOS)환경 에서는 하나의 프로그램이 실행되는 동안 다른 프로그램을 실행시킬 수 없었다(한번에 하나의 작업만 실행).

요즘에는 대부분의 운영체제가 동시에 2개 이상의 프로그램을 처리할 수 있는 다중작업을 지원한다.

### 다중 작업용 운영체제

- 여러 프로그램이 CPU와 메모리를 공유하게 된다.
    - CPU가 처리 속도가 워낙 빨라서 짧은 시간 규모로 여러 프로그램을 번갈아 가면서 실행
      *유저는 동시에 실행 되는 것처럼 느낄 수 있다.
- CPU의 작업 시간을 여러 프로그램들이 조금씩 나누어 쓰는 시스템을 시 분할 시스템(time sharing system)이라 부른다.
- 메모리 공간을 분할해 여러 프로그램들을 동시에 메모리에 올려놓고 처리하는 시스템을
  다중 프로그래밍 시스템(multi-programming system)이라고 부른다.

### 다중처리기 시스템(multi-processor system)

- 하나의 컴퓨터 안에 CPU가 여러 개 설치된 경우를 뜻한다.
- CPU가 여럿 있는 컴퓨터는 서로 다른 CPU에서 여러 프로그램이 동시에 실행될 수 있어 처리가 더욱 빨라지지만, 운영체제 입장에서는 여러 CPU를 관리하기 위해 더욱 복잡한 메커니즘을 필요로 한다.
* 이 책에서는 특별한 언급 없으면 CPU 하나만 탑재된 컴퓨터를 기준으로 설명

### 단일, 다중 사용자용 운영체제

- 단일 사용자용 운영체제는 말그대로 한 번에 한 명의 사용자만이 사용
- 다중 사용자용 운영체제는 한 번에 여러 사용자가 동시에 접속해 사용 할 수 있다.
    - 우리가 흔히 서버라고 부르는 컴퓨터가 이에 해당된다.


### 일괄처리 방식(Batch Processing)

- 요청된 작업을 일정량씩 모아서 한꺼번에 처리하는 방식
    - 처리해야 할 여러 작업들을 모아 일정량이 쌓이면 일괄적으로 처리하고,
      모든 작업이 종료된 후에 결과를 얻을 수 있다.
    - 사용자 입장에서는 응답시간이 길다는 단점이 있다.
- 일괄처리 방식의 예로는 초창기 컴퓨터에 사용되던 펀치 카드(punch card)처리 시스템이 있다.

### 실시간 운영체제

- 정해진 시간 안에 어떠한 일이 반드시 처리됨을 보장해야 하는 시스템
- 일정 시간 안에 작업이 완료되지 못할 경우에는 동작 자체가 되지 않거나 큰 위험을 초래할 가능성이 있는 시스템에서 사용된다.
    - 원자로, 공장 제어 시스템, 미사일 제어 시스템 등이 그 예이다.
- 경성 실시간 시스템과 연성 실시간 시스템
    - 경성 실시간 시스템(hard realtime system)
      주어진 시간을 지키지 못할 경우 매우 위험한 결과를 초래할 가능성이 있는
      로켓, 원자로 제어 시스템 등을 말한다.
    - 연성 실시간 시스템(soft  realtime system)
      멀티미디어 스트리밍 시스템과 같이 데이터가 정해진 시간 단위로 전달되어야 올바른
      기능을 수행할 수 있는 시스템

# 운영체제의 자원 관리 기능

---

여기서 자원은 하드웨어 자원과 소프트웨어 자원으로 나뉜다.

### 하드웨어 자원

- CPU와 메모리(Memory)를 비롯해 주변장치 또는 입출력 장치라 불리는 장치들로 구성된다.
- CPU는 통상적으로 컴퓨터 한 대에 하나가 장착되기 때문에 여러 프로세스들이 CPU를 효율적으로 나누어 사용 할 수 있도록 관리되어야 한다.
- 메모리 역시 시스템 내에 한정된 용량만 존재하기 때문에 서로 다른 다수의 프로세스들이 나누어 쓸 수 있도록 해야 한다.
- 입출력 장치도 운영체제의 관리가 필요하다.
  CPU와 메모리는, 전원이 꺼지면 처리 중이던 정보가 모두 지워지기 때문에 전원이 나가도 기억해야 하는 부분을 입출력 장치 중 한 종류인 보조기억장치에 파일 형태로 저장한다.
  이 때 이러한 파일들이 저장되는 방식 및 접근 권한 등에 대해서도 운영체제가 관리를 해주어야 한다.
  *보조기억장치로 사용되는 대표적인 매체로는 하드 디스크가 있다.

### CPU

- CPU가 하나 밖에 없는 가장 기본적인 컴퓨터 구조에서도 프로세스는 여러 개가 동시에 수행될 수 있다.
- 매 시점 어떠한 프로세스에 CPU를 할당해 작업을 처리할 것인지 결정하는 일이 필요하다.
  이러한 일을 CPU 스케줄링(CPU scheduling)이라고 한다.

### CPU 스케줄링(CPU scheduling)

- CPU를 가장 효율적으로 사용하면서도, 특정 프로세스가 불이익을 당하지 않도록 한다.
- 대표적인 CPU 스케줄링 기법
    - 선입선출(First come First Served:FCFS)
        - CPU를 사용하기 위해 도착한 프로세스들 중 먼저 온 것을 처리해주는 방식
        - 일상생활에서 줄을 서는 것과 유사하다.
        - CPU를 먼저 얻은 프로세스가 원하는 작업을 완료할 때까지 다른 프로세스들이 CPU를 사용하지 못한다.
        - 이 방식을 사용하면 CPU 자체의 효율적인 사용 측면에서는 문제가 없지만 전체 시스템 입장에서는 비효율적인 결과를 초래할 가능성이 있다.



        ### 단점
        
        - 짧은 수행시간을 가진 프로세스들은 선행 프로세스가 작업을 마칠 때까지 장시간 기다려야 한다. 이 단점을 보완하고자 고안된 기법이 라운드 로빈이다.
    - 라운드 로빈(Round Robin)
        - CPU를 한 번 할당받아 사용할 수 있는 시간을 일정하게 고정된 시간으로 제한한다.
        - 긴 작업을 요하는 프로세스가 CPU를 할당 받더라도 정해진 시간이 지나면 CPU를 내어놓고 CPU 대기열의 제일 뒤에 가서 줄을 서야 한다.
    - 우선순위(Priority) 기법
        - 대기 중인 프로세스들에 우선순위를 부여하고 우선순위가 높은 프로세스에 CPU를 먼저 할당한다.
        - 각 프로세스에 중요도를 설정해 처리하는 방식
        - 지나치게 오래 기다리는 프로세스가 발생하지 않도록, 기다린 시간이 늘어날수록 우선순위를 점차 높여주는 방안도 우선순위 스케줄링에 활용될 수 있다.

### 메모리(Memory)

- CPU가 직접 접근할 수 있는 컴퓨터 내부의 기억장치
- 프로그램이 CPU에 실행되려면 해당 부분이 메모리에 올라가 있어야 한다.
  이 때 한정된 메모리 공간에 여러 프로그램을 수용하려면 메모리에 대한 효율적인 관리 메커니즘이 필요하다.
- 메모리 관리를 위해 운영체제는 메모리의 어느 부분이 어떤 프로그램에 의해 사용되고 있는지를 파악하여 이를 유지하게 되는데, 이러한 정보는 주소(address)를 통해 관리된다.
- 운영체제는 프로그램에 메모리가 필요할 때 할당하고, 더 이상 필요하지 않을 때 회수한다.
- 서로 다른 프로세스 영역을 침범하지 않도록 보안을 유지하는 역할도 운영체제의 몫
    - 운영체제는 각 프로세스가 자신의 메모리 영역에만 접근할 수 있도록 관리해야 한다

### 물리적 메모리 관리 방식

- 고정 분할(fixed partition) 방식
    - 물리적 메모리를 몇 개의 분할로 미리 나누어 관리한다.
    - 이 방식은 융통성이 없다는 단점이 있다.
      이는 메모리에 동시 적재되는 최대 프로그램의 수가 분할 개수로 한정되기 때문이다.
      또한 분할의 크기보다 큰 프로그램은 적재가 불가능하게 된다.
    - 고정적인 크기에서 남는 영역이 발생하게 된다.
      이것을 내부조각(internal fragmentation) 이라고 한다.
- 가변 분할(variable partition) 방식
    - 매 시점 프로그램의 크기에 맞게 메모리를 분할해서 사용하는 방식
    - 분할의 크기 때문에 큰 프로그램의 실행이 제한되는 문제는 발생하지 않는다.
    - 단점은 메모리의 크기보다 더 큰 프로그램의 실행은 여전히 불가능하다.
    - 고정 분할 방식에서 발생하는 내부조각은 발생하지 않지만, 외부조각이 발생 할 수 있다.
        - 외부 조각이란 프로그램에 할당되지는 않았지만, 그 크기가 작아 프로그램을 올리지 못하는 메모리 영역을 말한다.
- **가상 메모리(virtual memory) 방식**
    - 현대의 범용 컴퓨터 환경에서 가장 널리 사용되는 메모리 관리 기법
    - 물리적 메모리보다 더 큰 프로그램이 실행 되는 것을 지원한다.
      이 때 실행될 수 있는 프로그램의 크기는 가상메모리의 크기에 따라 결정된다.
    - 프로그램의 크기가 2Gbyte일지라도 전체가 항상 동시에 사용 되는 것은 아니다.
      그러므로 현재 사용되는 있는 부분만 메모리에 올리고, 나머지는 하드디스크와 같은 보조기억장치에 저장해두었다가 필요할 때 적재하는 방식을 취한다.
      이 때 사용하는 보조기억 장치 영역을 **스왑 영역(swap area)**라고 부른다.

  ## 페이징(paging)

    - 프로그램을 구성하는 가상메모리 주소 공간은 페이지(page)라는 동일한 크기의 작은 단위로 나뉘어 물리적 메모리와 스왑 영역에 일부분씩 저장된다.
    - 이렇게 동일한 단위로 메모리를 나누는 기법을 페이징 기법이라고 한다.

## 인터럽트(interrupt)

- 주변 장치 및 입출력 장치는 CPU나 메모리와 달리 인터럽트라는 메커니즘을 통해 관리가 이루어진다.
- 주변장치들은 CPU의 서비스가 필요한 경우에 신호를 발생시켜 서비스를 요청하는데,
  이 때 발생시키는 신호를 인터럽트라고 한다.
- CPU는 평소에 CPU 스케줄링에 따라 자기에게 주어진 작업을 수행하다가 인터럽트가 발생하면 하던 일을 잠시 멈추고 인터럽트에 의한 요청 서비스를 수행한다.
- 인터럽트를 발생 시키는 대표적인 예시
    - 사용자가 키보드의 글자를 입력하면 키보드는 CPU에 인터럽트를 발생시켜 사용자로 부터 입력이 들어왔음을 알린다. 그러면 CPU는 하던 일을 멈추고 인터럽트로 인해 처리해야 할 작업을 수행한다.
- CPU는 인터럽트를 처리한 후 원래 수행하던 작업을 돌아오기 위해 인터럽트 처리 직전에 수행 중이던 작업의 작업의 상태를 저장한다.
- 인터럽트의 종류마다 인터럽트 처리 루틴이 다른데 이것은 운영체제 커널 내에 존재하는 코드로 CPU 스케줄링, 메모리 관리루틴 등 다양한 기능을 위한 커널 코드의 일부분이라고 할 수 있다.
  인터럽트 처리 루틴을 찾아서 정의된 코드에 따라 일을 수행하게 된다.

### 컨트롤러(controller, 제어기)

- 해당 장치에 대한 업무를 처리하고, 이를 메인 CPU에 인터럽트를 발생시켜 보고하는 역할을 한다
- 사용자로부터 키보드에 입력이 들어오면 키보드 컨트롤러가 인터럽트를 발생시켜 C
  PU에 그 사실을 알려주는 것을 예로 들 수 있다.