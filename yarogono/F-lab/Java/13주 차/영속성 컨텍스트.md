# 🔗 참고자료

---

- chatGPT
- 스프링캠프 김영한 - JPA 영속성 컨텍스트 ⇒ [**링크**](https://www.youtube.com/watch?v=xqEVS8LzxZM&t=2s&ab_channel=springcamp.io)

# ✏공부 내용 정리

---

## ❓영속성 컨텍스트(Persistence Context)란?

JPA에서 관리하는 개념으로 엔티티(Entity) 객체를 영구 저장하는 환경을 말합니다.

- 영속성 컨텍스트는 논리적인 개념으로, 물리적으로는 일반적으로 데이터베이스와 연결된 세션(Session)이나 영속성 매니저(EntityManager)를 통해 생성됩니다.
- 세션 또는 영속성 매니저를 통해 영속성 컨텍스트를 생성하면, 해당 세션 또는 영속성 매니저와 연결된 데이터베이스에 대한 작업이 가능해집니다.

## ❓영속성 컨텍스트가 하는 일은?

JPA에서 엔티티 객체의 상태를 관리하며, 엔티티 객체와 데이터베이스의 테이블 사이의 매핑을 제공합니다.

- 엔티티 객체가 영속성 컨텍스트에 포함되면, JPA는 해당 객체의 변경을 자동으로 감지하고, 변경된 내용을 데이터베이스에 반영합니다.

## 영속성 컨텍스트의 이점

- 1차 캐시
    - 1차 캐시는 객체를 데이터베이스에서 가져올 때 사용되면,
      성능을 향상시키는 데 기여한다.
    - 만약 같은 엔티티가 여러 번 요청될 경우, 데이터베이스에 접근하지 않고 캐시에서 객체를 가져올 수 있다.
- 동일성(identity) 보장
    - 엔티티 객체의 동일성을 보장한다.
    - 같은 식별자를 가지는 엔티티 객체는 항상 같은 인스턴스를 반환합니다.
      ⇒ 객체지향적인 설계와 개발이 가능하다.
- 트랜잭션을 지원하는 쓰지 지연(transactional write-behind)
    - 변경된 내용을 데이터베이스에 바로 반영하지 않고,
      변경 내용을 메모리나 캐시에 보관하여 나중에 한꺼번에 데이터베이스에 반영하는 것을 말한다.
    - 이를 통해 데이터베이스 접근 횟수를 줄이고, 성능을 향상시킬 수 잇다.
- 변경 감지(Dirty Checking)
    - 객체를 추적하면서 변경된 객체를 자동으로 감지한다.
    - 객체가 변경될 때마다 데이터베이스에 자동으로 업데이트되며,
      변경된 객체만 데이터베이스에 업데이트되므로 성능을 향상 시킨다.
- 지연 로딩(Lazy Loading)
    - 지연 로딩은 필요한 시점에만 연관된 엔티티를 로딩하여 메모리 사용량을 최적화하는 기능입니다.
    - 이 기능은 영속성 컨텍스트를 사용하여 구현됩니다.
    - 연관된 엔티티가 필요한 경우, 영속성 컨텍스트에서 먼저 로딩을 시도하고, 로딩된 엔티티를 사용합니다.

## ❓영속성 레이어(PErsistence Layer)란?

소프트웨어에서 데이터를 영구적으로 저장하고 관리하는 기능을 담당하는 계층으로,
데이터베이스와의 연결과 데이터 관리를 효율적으로 처리하여 애플리케이션의 성능과 확장성을 높일 수 있다.

- 일반적으로 데이터베이스나 파일 시스템 등을 사용하여 데이터를 저장하고 관리한다.
- 애플리케이션의 비즈니스 로직과 데이터베이스 간의 연결을 담당한다.
    - 비즈니스 로직에서는 데이터를 생성, 조회, 수정, 삭제하는 등의 작업을 수행하며,
      영속성 레이어에서는 이러한 작업을 데이터베이스에 반영한다.
        - 위와 같은 방식은 애플리케이션과 데이터베이스 간의 결합도를 줄이고,
          확장성을 높일 수 있다.
- JPA, Hibernate, MyBatis

## 궁금한 점